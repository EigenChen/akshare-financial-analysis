# AKShare 接口使用说明

根据实际测试结果，以下是已验证可用的接口和正确的使用格式。

## 已验证可用的接口

### 1. 财务指标接口

**接口名称**: `stock_financial_abstract_ths`

**股票代码格式**: **不带交易所后缀**，如 `"000001"`

**示例**:
```python
import akshare as ak

# 正确：不带后缀
financial = ak.stock_financial_abstract_ths(symbol="000001")

# 错误：带后缀会失败
# financial = ak.stock_financial_abstract_ths(symbol="000001.SZ")
```

### 2. 资产负债表接口

**接口名称**: `stock_balance_sheet_by_report_em`

**股票代码格式**: **带交易所后缀**，如 `"000001.SZ"` 或 `"600519.SH"`

**示例**:
```python
import akshare as ak

# 正确：带后缀
balance = ak.stock_balance_sheet_by_report_em(symbol="000001.SZ")

# 错误：不带后缀可能失败
# balance = ak.stock_balance_sheet_by_report_em(symbol="000001")
```

### 3. 利润表接口

**接口名称**: `stock_profit_sheet_by_report_em`

**股票代码格式**: **带交易所后缀**，如 `"000001.SZ"` 或 `"600519.SH"`

**示例**:
```python
import akshare as ak

# 正确：带后缀
profit = ak.stock_profit_sheet_by_report_em(symbol="000001.SZ")
```

### 4. 现金流量表接口

**接口名称**: `stock_cash_flow_sheet_by_report_em`

**股票代码格式**: **带交易所后缀**，如 `"000001.SZ"` 或 `"600519.SH"`

**示例**:
```python
import akshare as ak

# 正确：带后缀
cash_flow = ak.stock_cash_flow_sheet_by_report_em(symbol="000001.SZ")
```

## 股票代码格式判断

### 深交所（需要添加 `.SZ` 后缀）
- 000xxx: 主板
- 001xxx: 主板
- 002xxx: 中小板
- 300xxx: 创业板

### 上交所（需要添加 `.SH` 后缀）
- 600xxx: 主板
- 601xxx: 主板
- 603xxx: 主板
- 605xxx: 主板
- 688xxx: 科创板

### 自动判断函数

```python
def get_symbol_format(symbol):
    """根据股票代码自动判断需要的格式"""
    symbol_clean = symbol.replace('.SZ', '').replace('.SH', '')
    
    # 判断交易所
    if symbol_clean.startswith(('000', '001', '002', '300')):
        return symbol_clean + '.SZ'  # 深交所
    elif symbol_clean.startswith(('600', '601', '603', '605', '688')):
        return symbol_clean + '.SH'  # 上交所
    else:
        return symbol_clean + '.SZ'  # 默认深交所
```

## 使用建议

1. **财务指标**: 使用不带后缀的格式
2. **三大报表**: 使用带后缀的格式
3. **自动处理**: 脚本中已经包含了自动格式转换，可以直接使用不带后缀的股票代码

## 注意事项

1. 不同接口对格式要求不同，需要仔细区分
2. 如果某个接口返回空数据，检查股票代码格式是否正确
3. 某些股票可能没有完整的财务数据
4. 建议在批量获取时添加适当的延时（1-3秒）

## 已更新的脚本

以下脚本已经根据测试结果更新，会自动处理股票代码格式：

- `03_基础学习_获取财务数据.py` - 已更新
- `04_基础学习_获取年报数据.py` - 已更新
- `05_实战_年报数据收集.py` - 已更新

现在可以直接使用不带后缀的股票代码（如 `"000001"`），脚本会自动转换为正确的格式。

